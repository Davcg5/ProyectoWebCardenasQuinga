<!doctype html>
<html lang="es">

<head>


    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Usuario</title>


    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css"
          integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
            integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
            crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js"
            integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut"
            crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js"
            integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k"
            crossorigin="anonymous"></script>

    <style type="text/css">

        div.solid {
            border-style: ridge;
            height: auto;
            width: border-box;
        }


    </style>


</head>

<body>


<center>
    <div class="container">
        <br>
        <div class="solid">

            <br>

            <% var creando = typeof usuario === "undefined" ? true : false; %>

            <h1> <%= creando ? 'Crear' : 'Actualizar' %> Usuario</h1>
            <p><%= creando ? 'Creando' : 'Actualizando' %> un Usuario.</p>


            <form action="/Usuario/<%= creando ? 'crear' : 'actualizar' %>-usuario/<%= creando ? '' : usuario.idUsuario %>"
                  method="POST">

                <div class="row">
                    <div class="col">
                        <label for="nombreUsuario">Nombre:</label>
                        <input id="nombreUsuario" type="text"
                               value="<%= creando ? '' : usuario.nombreUsuario %>"
                               class="form-control-sm" name="nombreUsuario">

                    </div>
                    <div class="col">
                        <label for="cedulaUsuario">Cédula:</label>
                        <input id="cedulaUsuario" type="number"
                               value="<%= creando ? '' : usuario.cedulaUsuario %>"
                               class="form-control-sm" name="cedulaUsuario">
                    </div>
                </div>
                <br>

                <div class="row">

                    <div class="col">
                        <label for="direccionUsuario">Direcciòn:</label>
                        <input id="direccionUsuario" type="text"
                               value="<%= creando ? '' : usuario.direccionUsuario %>"
                               class="form-control-sm" name="direccionUsuario">

                    </div>

                    <div class="col">
                        <label for="telefonoUsuario">Telefono:</label>
                        <input id="telefonoUsuario" type="number"
                               value="<%= creando ? '' : usuario.telefonoUsuario %>"
                               class="form-control-sm" name="telefonoUsuario">
                    </div>
                </div>

                <br>
                <div class="row">
                    <div class="col">
                        <label for="contraseñaUsuario">Contraseña:</label>
                        <input id="contraseñaUsuario" type="password"
                               value="<%= creando ? '' : usuario.contraseñaUsuario %>"
                               class="form-control-sm" name="contraseñaUsuario">

                    </div>

                    <div class="col">

                        <label for="rol">Roles:</label>
                        <select class="form-control-sm" id="rol">
                            <% arregloRoles.forEach((rol)=>{%>

                            <option>
                                <%=rol.nombreRol%>

                            </option>
                            <%  })%>

                        </select>
                    </div>


                    <div class="col">

                        <label for="hacienda">hacienda:</label>
                        <select class="form-control-sm" id= hacienda name="hacienda">
                            <% arregloHacienda.forEach((hacienda)=>{%>

                            <option value=<%= hacienda.id%>>
                                <%=hacienda.nombre%>

                            </option>
                            <%  })%>

                        </select>
                    </div>
                </div>
                <br>

                <div class="col-sm-3">

                    <button class="btn btn-outline-success btn-espaciado btn-block"
                            onclick="validarNombre(event)"><%= creando ? 'Crear' : 'Actualizar' %> Usuario
                    </button>

                    <a class="btn btn-outline-danger btn-block btn-espaciado" href="/Usuario/usuario">
                        Regresar
                    </a>
                </div>


            </form>


            <br>
        </div>
    </div>
</center>


<script>


    const etiquetaSelectRegiones = document
        .getElementById('hacienda');

    arregloHacienda
        .forEach(
            (hacienda) => {
                const nuevaOption = document.createElement('option');
                nuevaOption.value = hacienda.id;
                nuevaOption.innerText = hacienda.nombre;
                etiquetaSelectRegiones.appendChild(nuevaOption);
            }
        )
    re
</script>




<script>
    function validarNombre(evento) {
        // 0) Obtener el valor del campo
        // 1) Revisar el campo no este vacio
        // 2) Revisar el campo tenga 3 char
        const inputNombre = document
            .getElementById("nombreUsuario");
        const nombre = inputNombre.value;
        if (nombre.length < 3) {
            event.preventDefault()
            alert('Tu nombre es muy corto')
        } else {

        }

    }
</script>


</body>
</html>